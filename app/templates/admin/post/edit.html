{% extends "admin/layout.html" %}

{% block content %}
  <h1 class="mega"><span class="page-header">Edit Post</span></h1>

  {% from "macro/form.html" import render_field, render_button %}
  <form method="post" action="{{ url_for('admin.edit_post', slug=post.slug) }}">
      {{ form.csrf_token }}
      {{ render_field(form.prev_title) }}
      <ul class="form">
        <li>{{ render_field(form.title) }}</li>
        <li>{{ render_field(form.body, rows="12") }}</li>
        <li class="checkbox">{{ render_field(form.visible) }}</li>
        <li>{{ render_button('Update') }}</li>
      </ul>
  </form>

  <h1>Preview</h1>
  <p>
    Published <span class="brand">{{ post.published|datetime }}</span>
    {% if post.is_edited %}
      (Edited <span class="brand">{{ post.edited|datetime }}</span>)
    {% endif %}
  </p>

  <article>
    <h1 class="mega"><span class="page-header">{{ post.title|safe }}</span></h1>
    {{ post.body|markdown }}
  </article>
{% endblock %}
