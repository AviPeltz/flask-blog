{% extends "frontend/layout.html" %}

{% block content %}
  {% from "macro/post.html" import render_post %}
  {{ render_post(post) }}

  <h2>Post a comment</h2>
  {% from "macro/comment.html" import render_comment_form with context %}
  {{ render_comment_form(form) }}

  <section id="comments">
    {% set num_comments = post.comments|length %}
    <h2>{{ num_comments }} Comment{{ num_comments|pluralize }}</h2>

    {% from "macro/comment.html" import render_comment_tree, render_comment with context %}
    {{ render_comment_tree(post.comments, render_comment) }}
  </section>
{% endblock %}
